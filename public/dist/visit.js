/*! opencloset - v0.0.1 - 2014-11-13 */$(function(){var a,b,c,d;return b=!1,$(".purpose .clickable.label").click(function(){var a,b;return b=$("input[name=purpose]").val(),a=$(this).text(),$("input[name=purpose]").prop("value",$.trim(""+b+" "+a))}),$("#btn-service-disagree").click(function(){return $("input[name=service]").prop("checked",!1),$("#modal-service .modal-body").scrollTop(0),$("#modal-service").modal("hide")}),$("#btn-service-agree").click(function(){return $("input[name=service]").prop("checked",!0),$("#modal-service .modal-body").scrollTop(0),$("#modal-service").modal("hide")}),$("input[name=service]").click(function(){return $(this).prop("checked")?($(this).prop("checked",!1),$("#modal-service").modal("show")):void 0}),$("#btn-privacy-disagree").click(function(){return $("input[name=privacy]").prop("checked",!1),$("#modal-privacy .modal-body").scrollTop(0),$("#modal-privacy").modal("hide")}),$("#btn-privacy-agree").click(function(){return $("input[name=privacy]").prop("checked",!0),$("#modal-privacy .modal-body").scrollTop(0),$("#modal-privacy").modal("hide")}),$("input[name=privacy]").click(function(){return $(this).prop("checked")?($(this).prop("checked",!1),$("#modal-privacy").modal("show")):void 0}),setTimeout(function(){return $(".alert").remove()},5e3),d=function(a){return $("#visit-alert").prepend('<div class="alert alert-danger"><button class="close" type="button" data-dismiss="alert">&times;</button>'+a+"</div>"),setTimeout(function(){return $(".alert").remove()},5e3)},a=function(){return $(".sms").removeClass("block").hide(),$("#btn-sms-confirm-label").html("SMS 인증번호 전송"),$("#btn-sms-confirm").prop("disabled",!1)},a(),$(".signup").removeClass("block").hide(),$("#btn-sms-reset").click(function(){return a()}),c=function(a){var b,c;return OpenCloset.sendSMSValidation(a),$(".sms").addClass("block").show(),$("#btn-sms-confirm-label").html("SMS 인증하기"),c=moment().add("m",5),$("#sms-remain-seconds").html(c.diff(moment(),"seconds")),b=setInterval(function(){var a;return a=c.diff(moment(),"seconds"),a>0?$("#sms-remain-seconds").html(a):($("#sms-remain-seconds").html(0),$("#btn-sms-confirm").prop("disabled",!0),clearInterval(b))},500)},$("#btn-sms-confirm").click(function(a){var e,f,g,h,i,j,k,l,m;return a.preventDefault(),i=$("input[name=name]").val(),j=$("input[name=phone]").val(),l=$("input[name=service]").prop("checked"),k=$("input[name=privacy]").prop("checked"),m=$("input[name=sms]").val(),h=$("input[name=gender]:checked").val(),g=$("input[name=email]").val(),e=$("input[name=address]").val(),f=$("input[name=birth]").val(),i&&j&&l&&k&&m?$("#visit-form").submit():i?j?/^\d+$/.test(j)?/^999/.test(j)?void d("전송 불가능한 휴대전화입니다."):l?k?b?h?g?e?f?/^(19|20)|\d\d$/.test(f)?$.ajax("/api/user.json",{type:"POST",data:{name:i,email:g,address:e,gender:h,phone:j,birth:f},success:function(){return b=!1,c(j)},error:function(){return d("서버 오류가 발생했습니다.")}}):void d("유효하지 않은 생년입니다."):void d("생년을 입력해주세요."):void d("주소를 입력해주세요."):void d("전자우편을 입력해주세요."):void d("성별을 입력해주세요."):$.ajax("/api/search/user.json",{type:"GET",data:{q:j},success:function(a){var b;return 1!==a.length?void d("휴대전화가 중복되었습니다."):(b=a[0],b.name!==i?void d("이름과 휴대전화가 일치하지 않습니다."):c(j))},error:function(a){var c,e;return c=null!=(e=404===a.status)?e:{warning:"danger"},404===a.status?(d("사용자 등록이 필요합니다. 추가 정보를 입력해주세요."),$(".signup").addClass("block").show(),b=!0):d("서버 오류가 발생했습니다.")}}):void d("개인정보 이용안내를 확인해주세요."):void d("서비스 이용약관을 확인해주세요."):void d("유효하지 않은 휴대전화입니다."):void d("휴대전화를 입력해주세요."):void d("이름을 입력해주세요.")}),$("#btn-booking-cancel").click(function(a){var b,c,e;return a.preventDefault(),b=$("input[name=name]").val(),c=$("input[name=phone]").val(),e=$("input[name=sms]").val(),b&&c&&e?($("input[name=booking]").prop("value","-1"),$("#visit-info-form").submit()):b?c?/^\d+$/.test(c)?/^999/.test(c)?void d("전송 불가능한 휴대전화입니다."):void(e||d("인증번호를 입력해주세요.")):void d("유효하지 않은 휴대전화입니다."):void d("휴대전화를 입력해주세요."):void d("이름을 입력해주세요.")}),$("#btn-info").click(function(a){var b,c,e,f,g,h,i,j,k,l,m,n;return a.preventDefault(),j=$("input[name=name]").val(),k=$("input[name=phone]").val(),m=$("input[name=sms]").val(),h=$("input[name=gender]:checked").val(),g=$("input[name=email]").val(),b=$("input[name=address]").val(),c=$("input[name=birth]").val(),i=$("input[name=height]").val(),n=$("input[name=weight]").val(),e=$("input[name=booking]").val(),l=$("input[name=purpose]").val(),f=$("input[name=company]").val(),j&&k&&m&&h&&g&&b&&c&&i&&n&&e&&l&&f?$("#visit-info-form").submit():j?k?/^\d+$/.test(k)?/^999/.test(k)?void d("전송 불가능한 휴대전화입니다."):m?h?g?b?c?/^(19|20)|\d\d$/.test(c)?i?/^\d+$/.test(i)?n?/^\d+$/.test(n)?e?l?void(f||d("응시 기업 및 분야를 입력해주세요.")):void d("대여 목적을 입력해주세요."):void d("방문 일자를 선택해주세요."):void d("유효하지 않은 몸무게입니다."):void d("몸무게를 입력해주세요."):void d("유효하지 않은 키입니다."):void d("키를 입력해주세요."):void d("유효하지 않은 생년입니다."):void d("생년을 입력해주세요."):void d("주소를 입력해주세요."):void d("전자우편을 입력해주세요."):void d("성별을 입력해주세요."):void d("인증번호를 입력해주세요."):void d("유효하지 않은 휴대전화입니다."):void d("휴대전화를 입력해주세요."):void d("이름을 입력해주세요.")}),$("#btn-booking").click(function(a){var b,c;return a.preventDefault(),b=$("input[name=gender]:checked").val(),c=$("input[name=booking]").prop("value"),$.ajax("/api/gui/booking-list.json",{type:"GET",data:{gender:b},success:function(a){var b,d,e,f,g;for($("#booking-list").html(""),g=[],e=0,f=a.length;f>e;e++)b=a[e],d=_.template($("#tpl-booking").html()),$("#booking-list").append($(d(b))),g.push($("input[type='radio'][name='booking_id'][value='"+c+"']").prop("checked",!0));return g},error:function(a){return console.log(a.status)}})}),$("#btn-booking-modal-cancel").click(function(){return $("#modal-booking .modal-body").scrollTop(0),$("#modal-booking").modal("hide")}),$("#btn-booking-modal-confirm").click(function(){var a;return a=$("input[type='radio'][name='booking_id']:checked"),a?($("input[name=booking]").prop("value",a.data("id")),$("#lbl-booking").html(" - "+a.data("ymd")+" "+a.data("hm")),$("#modal-booking .modal-body").scrollTop(0),$("#modal-booking").modal("hide")):void 0}),$("input[name=gender]").click(function(){return $("input[name=booking]").prop("value",""),$("#lbl-booking").html("")})});