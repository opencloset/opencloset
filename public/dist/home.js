/*! opencloset - v0.0.1 - 2014-11-13 */$(function(){var a;return $("#clothes-id").focus(),$("#btn-clear").click(function(a){return a.preventDefault(),$("#clothes-table table tbody tr").remove(),$("#action-buttons").hide(),$("#clothes-id").focus()}),$("#btn-clothes-search").click(function(){return $("#clothes-search-form").trigger("submit")}),$("#clothes-search-form").submit(function(a){var b;return a.preventDefault(),b=$("#clothes-id").val(),$("#clothes-id").val("").focus(),b?$.ajax("/api/clothes/"+b+".json",{type:"GET",dataType:"json",success:function(a){var b,c,d;if(a.code=a.code.replace(/^0/,""),a.statusCode=OpenCloset.status[a.status].id,"대여중"===a.status){if($("#clothes-table table tbody tr[data-order-id='"+a.order.id+"']").length)return;c=_.template($("#tpl-row-checkbox-clothes-with-order").html()),b=$(c(a)),a.order.overdue&&(c=_.template($("#tpl-overdue-paragraph").html()),d=c(a),b.find("td:last-child").append(d))}else{if($("#clothes-table table tbody tr[data-clothes-code='"+a.code+"']").length)return;c=_.template($("#tpl-row-checkbox-clothes").html()),b=$(c(a)),"대여가능"===a.status&&$("#action-buttons").show()}return b.find(".order-status").addClass(OpenCloset.status[a.status].css),$("#clothes-table table tbody").append(b)},error:function(a){return OpenCloset.alert("danger",a.responseJSON.error)},complete:function(){}}):void 0}),a=function(a){return"all"===a?$(".clothes-status").show():($(".clothes-status").hide(),$(".clothes-status-"+a).show())},$("#clothes-status-all").click(function(){return a("all")}),$("#clothes-status-1").click(function(){return a(1)}),$("#clothes-status-2").click(function(){return a(2)}),$("#clothes-status-3").click(function(){return a(3)}),$("#clothes-status-4").click(function(){return a(4)}),$("#clothes-status-5").click(function(){return a(5)}),$("#clothes-status-6").click(function(){return a(6)}),$("#clothes-status-7").click(function(){return a(7)}),$("#clothes-status-8").click(function(){return a(8)}),$("#clothes-status-9").click(function(){return a(9)}),$("#clothes-status-11").click(function(){return a(11)}),$("#action-buttons li > a").click(function(){var a,b;return a=[],$("#clothes-table input:checked").each(function(b,c){return"input-check-all"!==$(c).attr("id")&&$(c).is(":visible")?a.push($(c).data("clothes-code")):void 0}),a=_.uniq(a),a.length?(b=OpenCloset.status[this.innerHTML.replace(/^\s+|\s+$/g,"")].id,$.ajax("/api/clothes-list.json",{type:"PUT",data:$.param({code:a,status_id:b},!0),dataType:"json",success:function(){return $.ajax("/api/clothes-list.json",{type:"GET",data:$.param({code:a},!0),dataType:"json",success:function(b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)a=b[d],c=a.code.replace(/^0/,""),f.push($("#clothes-table table tbody tr[data-clothes-code='"+c+"'] td:nth-child(3) span.order-status").html(a.status).removeClass(function(a,b){return b}).addClass(["order-status","label",OpenCloset.status[a.status].css].join(" ")));return f},error:function(a){return OpenCloset.alert("danger",a.responseJSON.error)}})},error:function(a){return OpenCloset.alert("danger",a.responseJSON.error)}}),$("#clothes-id").focus()):void 0}),$("#input-check-all").click(function(){var a;return a=$("#input-check-all").is(":checked"),$(this).closest("thead").next().find(".ace:checkbox:not(:disabled)").prop("checked",a)})});