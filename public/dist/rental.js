/*! opencloset - v0.0.1 - 2014-11-13 */$(function(){return $("#query").focus(),$("#btn-clear").click(function(a){return a.preventDefault(),$("#clothes-table table tbody tr").remove(),$("#user-table table tbody tr").remove(),$("#action-buttons").hide(),$("#query").focus()}),$("#btn-search").click(function(){return $("#search-form").trigger("submit")}),$("#search-form").submit(function(a){var b;return a.preventDefault(),b=$("#query").val(),$("#query").val("").focus(),b?(4===b.length&&$.ajax("/api/clothes/"+b+".json",{type:"GET",dataType:"json",success:function(a){var b,c,d;return a.code=a.code.replace(/^0/,""),a.categoryStr=OpenCloset.category[a.category].str,$("#clothes-table table tbody tr[data-clothes-code='"+a.code+"']").length?void 0:("대여중"===a.status?(c=_.template($("#tpl-row-checkbox-disabled-with-order").html()),b=$(c(a)),a.order.overdue&&(c=_.template($("#tpl-overdue-paragraph").html()),d=c(a),b.find("td:last-child").append(d))):"대여가능"===a.status?(c=_.template($("#tpl-row-checkbox-enabled").html()),b=$(c(a)),"대여가능"===a.status&&$("#action-buttons").show()):(c=_.template($("#tpl-row-checkbox-disabled-without-order").html()),b=$(c(a))),b.find(".order-status").addClass(OpenCloset.status[a.status].css),$("#clothes-table table tbody").append(b))},error:function(a){return 404===a.status?OpenCloset.alert("warning",""+b+" 의류는 찾을 수 없습니다."):void 0},complete:function(){}}),$.ajax("/api/search/user.json",{type:"GET",data:{q:b},dataType:"json",success:function(a){var b,c,d,e,f,g;for(g=[],e=0,f=a.length;f>e;e++)d=a[e],$("#user-table table tbody tr[data-user-id='"+d.id+"']").length||(c=_.template($("#tpl-row-radio").html()),b=$(c(d)),g.push($("#user-table table tbody").append(b)));return g},error:function(a){return 404===a.status?OpenCloset.alert("warning",""+b+" 검색어와 관련있는 사용자는 찾을 수 없습니다."):void 0},complete:function(){}})):void 0}),$("#input-check-all").click(function(){var a;return a=$("#input-check-all").is(":checked"),$(this).closest("thead").next().find(".ace:checkbox:not(:disabled)").prop("checked",a)}),$("#action-buttons").click(function(){var a,b;return b=$("input[name=user_id]:checked").val(),a=[],$("input[name=clothes_code]:checked").each(function(b,c){return"input-check-all"!==$(c).attr("id")?a.push($(c).data("clothes-code")):void 0}),a=_.uniq(a),b?a?$("#order-form").submit():OpenCloset.alert("danger","대여할 옷을 선택해 주세요."):OpenCloset.alert("danger","대여할 사용자를 선택해 주세요")})});